<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CB POKER TEST</title>
    <style>
        body { background: #121212; color: white; text-align: center; font-family: sans-serif; }
        #status { padding: 20px; color: gold; }
        #start-btn { padding: 20px 40px; font-size: 20px; background: #27ae60; color: white; border: none; border-radius: 10px; cursor: pointer; }
    </style>
</head>
<body>
    <div id="status">第一步：请点击下方按钮启动多人引擎</div>
    <button id="start-btn" onclick="connectGame()">点击进入游戏</button>

    <script src="https://unpkg.com/playroomkit/dist/playroomkit.js"></script>

    <script>
        async function connectGame() {
            const btn = document.getElementById("start-btn");
            const status = document.getElementById("status");
            
            btn.innerText = "正在连接...";
            status.innerText = "正在尝试连接 Playroom 服务器...";

            try {
                // 尝试初始化
                await Playroom.insertCoin({
                    gameId: "cbpoker_test_123",
                    skipLobby: false
                });
                
                status.innerText = "连接成功！";
                btn.style.display = "none";
                
                // 连接成功后的逻辑
                Playroom.onPlayerJoin(() => {
                    status.innerText = "玩家已加入，当前底池: $" + (Playroom.getState("pot") || 0);
                });

            } catch (e) {
                console.error(e);
                status.innerText = "连接失败，原因: " + e.message;
                btn.innerText = "重试";
            }
        }
    </script>
</body>
</html>
